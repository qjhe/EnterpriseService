<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <title></title>
	    <link href="css/esStyle.css" rel="stylesheet"/>
	    <link href="css/adStyle.css" rel="stylesheet"/>
	    <script src="My97DatePicker/WdatePicker.js"></script>
		<link href="js/pagination/kkpager.css" rel="stylesheet">
		<script src="js/pagination/kkpager.min.js"></script>
	</head>
	<body style="background-color:#f6f6f6; ">
		<div id="esHeader" class="es-comWidth clearFiex" style="background-color:#fff; ">
		    <div class="es-logo-area clearFiex fl">
		        <a class="es-logo-a fl" href="javascript:;"></a>
		
		        <h2 class="fl">恒善普惠 · 企业服务</h2>
		    </div>                                    
		    <ul class="es-nav fl">
		    	<li>首页</li>
		    	<li>企业信息</li>
		        <li class="active">角色管理</li>
		        <li>流程管理</li>
		        <li>账户设置</li>
		    </ul>
		    <div class="es-login-info es-login-info2 fr">
	    		<p>欢迎您，<br />北京恒善信诚科技有限公司</p>
	    		<a href="javascript:;">退出</a>
		    </div>
		</div>
		<!--头部结束-->
		
		<!--主体开始-->
		<div class="es-comWidth whitebg" style="margin-top: 20px;">
			<ul class="es-tab-tit clearFiex ac-unselect">
				<li class="active">角色分配</li>
				<li>角色说明</li>
			</ul>
			<div class="es-tab-conwrap">
				<div class="es-tab-con">
					<!--查询-->
					<div class="ad-top ad-top-tabs">
						<a data-type="0" href="javascript:;">管理员</a>
						<a class="active" href="javascript:;">人事制单员</a>
						<a href="javascript:;">人事经理</a>
						<a href="javascript:;">财务人员</a>
						<a href="javascript:;">审核人员</a>
						<a href="javascript:;">资金管理</a>
						<a href="javascript:;">行政人员</a>
					</div>
					<!--表格-->
					<div class="ad-tablebox">
						<!--adfail 审核失败  adpay 支付中 adpaysuc 支付成功 adpayfai 支付失败-->
						<table class="ad-table">
							<thead>
								<th><div>序号</div></th>
								<th><div>登录账号</div></th>
								<th><div>负责人</div></th>
								<th><div>手机号</div></th>
								<th><div>邮箱</div></th>
								<th><div>工资详情</div></th>
								<th><div>领导权限</div></th>
								<th><div>操作</div></th>
								<th><div style="width: 80px;">关联企业</div></th>
							</thead>
							<tbody>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="1a" type="checkbox" checked disabled>
									<label for="1a"></label>
								</td>
								<td>
									<input id="1b" type="checkbox">
									<label for="1b"></label>
								</td>
								<td data-oid="1"><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="2a" type="checkbox" disabled>
									<label for="2a"></label>
								</td>
								<td>
									<input id="2b" type="checkbox" disabled>
									<label for="2b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="3a" type="checkbox">
									<label for="3a"></label>
								</td>
								<td>
									<input id="3b" type="checkbox">
									<label for="3b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="4a" type="checkbox">
									<label for="4a"></label>
								</td>
								<td>
									<input id="4b" type="checkbox">
									<label for="4b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="5a" type="checkbox">
									<label for="5a"></label>
								</td>
								<td>
									<input id="5b" type="checkbox">
									<label for="5b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="6a" type="checkbox">
									<label for="6a"></label>
								</td>
								<td>
									<input id="6b" type="checkbox">
									<label for="6b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="7a" type="checkbox">
									<label for="7a"></label>
								</td>
								<td>
									<input id="7b" type="checkbox">
									<label for="7b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="8a" type="checkbox">
									<label for="8a"></label>
								</td>
								<td>
									<input id="8b" type="checkbox">
									<label for="8b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="9a" type="checkbox">
									<label for="9a"></label>
								</td>
								<td>
									<input id="9b" type="checkbox">
									<label for="9b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							<tr>
								<td>1</td>
								<td>10244_cw</td>
								<td>王青</td>
								<td>15910232012</td>
								<td>569856523@qq.com</td>
								<td>
									<input id="10a" type="checkbox">
									<label for="10a"></label>
								</td>
								<td>
									<input id="10b" type="checkbox">
									<label for="10b"></label>
								</td>
								<td><a class="set-a-btn" href="javascript:;">修改</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">删除</a>&nbsp;&nbsp;<a class="set-a-btn" href="javascript:;">充值密码</a></td>
								<td><a class="set-a-btn" href="javascript:;">设置</a></td>
							</tr>
							</tbody>
					   </table>
					</div>
					<div class="add-role-box">
						<a href="javascript:;"><span>+</span> 添加</a>
					</div>
					<div class="page-nav-box" id="kkpager">

					</div>
				</div>
				<div class="es-tab-con" style="display: block;">
					<div class="rolM-box">
						<h4>角色权限说明</h4>
						<p>管理员：分配操作权限；</p>
						<p>人事制单员：制作工资单，可维护员工信息（新增、编辑）；</p>
						<p>人事经理：负责审核工资单中的人事信息，审核福利信息；</p>
						<p>财务人员：负责审核工资单的人事信息、审核福利信息、审核审核支付管理中的信息、审核报销管理中的信息；负责企业的资金管理相关信息。</p>
						<p>审核人员：负责审核工资单的人事信息、审核福利信息、审核支付管理中的信息、审核报销管理中的信息；预览企业资金管理相关信息。</p>
						<p>资金管理员：负责支付工资单信息、福利信息、支付管理信息、大额报销信息；预览企业资金管理相关信息。</p>
						<p>行政人员：发起支付管理；发起大额报销申请</p>
					</div>
					<h4 class="rolM-title"><span></span>发放工资/福利</h4>
					<div class="rolM-wages">
						<img src="images/rolM1.png" alt="">
					</div>
					<h4 class="rolM-title"><span></span>支付管理/报销管理</h4>
					<div class="rolM-payment">
						<img src="images/rolM2.png" alt="">
					</div>
				</div>
			</div>
		</div>

		<div class="meba" style="display:block ;"></div>
		<!-- 提示框s -->
		<div class="window-tips">
			<h4><span class="close fr"></span></h4>
			<div class="wt-con">
				<span></span>
				<p>操作成功</p>
			</div>
		</div>
		<!-- 提示框e -->
		<!-- 重置密码s -->
		<div class="del-dialog-box ddb-br" style="display: ;height: 260px;margin-top: -130px;">
			<h4><span class="diaClose close fr"></span>重置密码</h4>
			<div class="del-con">
				<p class="p-tit-d">是否重置该人事制单员的登录密码？</p>
				<p class="p-txt-d">张三三（187193746393）</p>
			</div>
			<p class="del-btn">
				<span id="" class="es-btn diaOk" style="margin-left: 10px;">确认</span>
				<span id="" class="es-btn none1 diacanc">取消</span>
			</p>
		</div>
		<!-- 重置密码e -->
		<!-- 修改&添加操作信息s -->
		<div class="es-dialog-box edb-box active" style="display: none;">
			<h4><span class="diaClose close fr"></span><span class="icon"></span>修改操作员信息</h4>
			<ul class="list">
				<li><label for="vroleName">登录号</label>
					<input id="vroleName" name="vroleName" type="text" placeholder="">
					<p class="es-error-msg"><em></em><span></span></p>
				</li>
				<li><label for="vloginUser">负责人</label>
					<input id="vloginUser" name="vloginUser" type="text" placeholder="">
					<p class="es-error-msg"><em></em><span></span></p>
				</li>
				<li><label for="vloginPwd">手机密码</label>
					<input id="vloginPwd" name="vloginPwd" type="text" placeholder="">
					<p class="es-error-msg"><em></em><span></span></p>
				</li>
				<li><label for="vnickName">电子邮箱</label>
					<input id="vnickName" name="vnickName" type="text" placeholder="">
					<p class="es-error-msg"><em></em><span></span></p>
				</li>
			</ul>
			<p class="del-btn">
				<span id="" class="es-btn diaOk" style="margin-left: 10px;">确认</span>
				<span id="" class="es-btn none1 diacanc">取消</span>
			</p>
		</div>
		<!-- 修改&添加操作信息e -->
		<!-- 设置关联企业s -->
		<div class="es-dialog-box edb-zd-box activ e" style="display: block;">
			<h4><span class="diaClose close fr"></span><span class="icon"></span>设置关联企业—人事制单员</h4>
			<div class="search-tb">
				<div class="stb-item">
					<span>企业名称</span>
					<input id="searchTxt" type="text" autocomplete="off" placeholder="输入搜索关键字"/>
					<a id="search" href="javascript:;">搜索</a>
				</div>
			</div>
			<div class="stb-con">
				<div class="stb-con-l fl">
					<div class="bus-list">
						<h3><span class="fl">企业列表</span><em class="fr"><label><input id="cbAll" type="checkbox"/>&nbsp;全部选中</label></em></h3>
						<div class="bus-list-con">
							<ul class="company-list" id="companyList">
								<!--<li>-->
									<!--<div class="company-item">-->
										<!--<label><input type="checkbox"/>&nbsp;<span>北京衡山科技网络有限公司</span></label>-->
										<!--<i>A</i>-->
									<!--</div>-->
								<!--</li>-->
							</ul>
						</div>
					</div>
				</div>
				<div class="stb-con-r fr">
					<div class="bus-list">
						<h3><span class="fl">已选择企业</span><em class="fr"><label id="removeAll"><strong></strong>全部清空</label></em></h3>
						<div class="bus-list-con">
							<ul class="company-list" id="ccList">
								<!--<li>-->
									<!--<div class="company-item">-->
										<!--<label><span>北京衡山科技网络有限公司</span></label>-->
										<!--<strong></strong>-->
									<!--</div>-->
								<!--</li>-->
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- 确定/取消 -->
			<p class="del-btn" style="margin-top: 26px; text-align: right">
				<span id="" class="es-btn diaOk" style="margin-left: 10px;">确认</span>
				<span id="" class="es-btn none1 diacanc" style="margin-right: 0;">取消</span>
			</p>
		</div>
		<!-- 设置关联企业e -->
		<!--主体结束-->
		<div class="es-tfooter" style="background: #f6f6f6;">
			<p>北京恒善普惠信息咨询有效公司  |  ©2016 squcorp.com All Rights Reserved  |  京ICP备 xxxxxx 号  |  京公网安备 xxxxxx</p>
		</div>
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/jquery.charfirst.pinyin.js"></script>
		<script src="js/ecJs.js"></script>
		<script src="js/esValidate.js"></script>
		<script type="text/javascript">
			fnTab($(".es-tab-tit"), $(".es-tab-conwrap"), "click");
			interColor("es-table-basicinfo", "#f6f6f6", "#fff");
			//分页
			definedPaginator(2, 50, "kkpager");
			//definedPaginator(pageNo, totalPages, "kkpager",initInvestorList)

			//菜单选择
			var a_add = $(".add-role-box a");
			$(".ad-top-tabs a").each(function(i,e){
				var This = $(this);
				This.click(function(){
					This.addClass("active").siblings("a").removeClass("active");
					This.data("type")=="0"?a_add.hide():a_add.show();
				});
			});
			//显示成功框
			var propTips = function(timmer){
				var $tip = $(".window-tips");
				var $meba_ = $(".meba");
				$tip.fadeIn();
				$meba_.fadeIn();
				clearTimeout(timmer);
				timmer = setTimeout(function(){
					$tip.fadeOut();
					$meba_.fadeOut();
				},3000);
			};

			$(".close").click(function(){closeProp($(this));});
			//隐藏重置密码框
			function closeProp(This){
				This.parent().parent().hide();
				$(".meba").hide();
			}

			//公司数据
			var companyData = [
				{id:0,name:"湖北猪饲料厂有限责任公司",firstLetter:""},
				{id:1,name:"福建国家电力发展公司",firstLetter:""},
				{id:2,name:"香港花旗联合银行",firstLetter:""},
				{id:3,name:"北京呵呵有限责任公司",firstLetter:""},
				{id:4,name:"北京用友科技有限公司",firstLetter:""},
				{id:5,name:"北京外包科技有限责任公司",firstLetter:""},
				{id:6,name:"河北哇哈哈化工厂",firstLetter:""},
				{id:7,name:"东南科技示范产业公司",firstLetter:""},
				{id:8,name:"小汤山牛饲料加工有限公司",firstLetter:""},
				{id:9,name:"唯科时代(北京)科技有限公司",firstLetter:""},
				{id:10,name:"网易公司",firstLetter:""},
				{id:11,name:"北京拉勾网络技术有限公司",firstLetter:""},
				{id:12,name:"北京车千里互动科技有限公司",firstLetter:""},
				{id:13,name:"勇大网络（北京）有限公司",firstLetter:""},
				{id:15,name:"北京优帆科技有限公司",firstLetter:""},
				{id:16,name:"北京鼎普科技股份有限公司",firstLetter:""}
			];
			companyData.sort(compareEle);
			//添加首拼
			$.each(companyData,function(i,e){
				this.firstLetter = makePy( this.name.charAt(0) ).join('');
			});

			var Html = $.map(companyData,function(e,i){
				return "<li>"+
							"<div class='company-item'>"+
								"<label><input id='"+ e.id +"' type='checkbox' data-oid='"+ e.id +"' data-oname='"+ e.name +"'/>&nbsp;<span>"+ e.name +"</span></label>"+
								"<i>"+ e.firstLetter +"</i>"+
							"</div>"+
						"</li>";
			}).join("");
			Html = Html==""?"<li>暂无数据</li>":Html;
			$("#companyList").html(Html);//填充公司
			var $companyItem = $("#companyList label span");
			//选择企业
			var cacheData = [];//已选公司缓存数据  若数据库已存数据 注意更新到缓存数据中
			$(document).on("change",".company-item input",function(){
				var This = $(this);
				reCache(This);
			});
			function reCache(This){
				if(This.prop("checked")){
					cacheData.push({id: This.data("oid"),name: This.data("oname")});
					refreshCacheData(cacheData);//更新右侧已选公司列表
				}else{
					$.each(cacheData,function(i,e){
						if(e!=undefined){
							if(e.id==This.data("oid")){
								delete cacheData[i];
								refreshCacheData(cacheData);//更新右侧已选公司列表
							}
						}
					});
					$("#cbAll").prop("checked",false);
				}
			}


			//更新右侧已选公司列表
			function refreshCacheData(cacheData){
				var cHtml = $.map(cacheData,function(e,i){
					if(e!=undefined){
						return "<li>"+
								"<div class='company-item'>"+
								"<label><span>"+ e.name +"</span></label>"+
								"<strong class='strClear' data-oid='"+ e.id +"' data-oname='"+ e.name +"'></strong>"+
								"</div>"+
								"</li>";
					}else{
						return "";
					}
				}).join("");
				Html = Html==""?"<li>请从左侧选择公司</li>":Html;
				$("#ccList").html(cHtml);//填充公司
			}

			//点击搜索
			$("#search").on("click",queryAward);
			document.getElementById("searchTxt").onkeydown = function(event){
				var e = event ? event : (window.event ? window.event : null);
				if (e.keyCode == 13){
					queryAward();
				}
			};
			function queryAward(){
				var str_ = $("#searchTxt").val();
				searchCh(str_,$companyItem);
				$("#companyList input[type='checkbox']").each(function(i,e){
					if(!$(this).prop("checked")){
						$("#cbAll").prop("checked",false);
						return;
					}
				});
			}
			//搜索
			function searchCh(str,arr){
				str = str||"";
				var reg = /^\s+|\s+$/g;
				if(str==""){
					arr.parent().parent().parent().removeClass("dnone");
					return;
				}else{
					arr.parent().parent().parent().removeClass("dnone");
				}
				$.each(arr,function(i,e){
					this.innerHTML.replace(reg, "").indexOf(str)>=0 ? "" : $(this).parent().parent().parent().addClass("dnone");
				});
			}


			var $cbAll = $("#cbAll");
			$cbAll.on("change",function(){
				reverseSelection();
			});
			//去掉已选项目
			$(document).on("click",".strClear",function(){
				var This = $(this);
				//去掉右侧勾选||全选
				$("#"+This.data("oid")).prop("checked",false);
				$cbAll.prop("checked",false);
				$.each(cacheData,function(i,e){
					if(e!=undefined){
						if(e.id==This.data("oid")){
							delete cacheData[i];
							refreshCacheData(cacheData);//更新右侧已选公司列表
						}
					}
				});
			});
			//全部清空
			$("#removeAll").on("click",function(){
				$(".bus-list input[type='checkbox']").prop("checked",false);
				cacheData.length = 0;
				refreshCacheData(cacheData);
			});
			//全选&全不选
			function reverseSelection(s){
				var oLi = $("#companyList li");
				if($cbAll.prop("checked")){
					$.each(oLi,function(){
						var This = $(this);
						if(!This.hasClass("dnone")){
							var oIpt = This.find("input");
							if(!oIpt.prop("checked")){
								oIpt.prop("checked",true);
								//更新缓存数据
								reCache(oIpt);
							}
						}
					});
				}else{
					$.each(oLi,function(){
						var This = $(this);
						if(!This.hasClass("dnone")){
							var oIpt = This.find("input");
							oIpt.prop("checked",false);
							//更新缓存数据
							reCache(oIpt);
						}
					});
				}

			}

			//字母排序相关

			//排序函数
			function compareEle(a, b) {
				var a1 = a.name.charAt(0);
				var b1 = b.name.charAt(0);
				if (a1.localeCompare(b1) > 0) {
					return 1;
				} else if (a1.localeCompare(b1) < 0) {
					return -1;
				} else {
					return 0;
				}
			}


			
		</script>
	</body>
</html>
